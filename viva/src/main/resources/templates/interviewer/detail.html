<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>면접관 상세</title>
  <link rel="stylesheet" th:href="@{/css/common.css}">
  <link rel="stylesheet" th:href="@{/css/int.css}">
</head>
<body>
  <!-- Header -->
  <div th:replace="fragments/header :: headerFragment"></div>

  <div class="interviewer-container">

    <!-- 🔹 상단 정보 + 프로필 + 예약버튼 -->
    <div class="top-section">
      <div class="reserve-button-right">
        <a class="reserve-btn" th:href="@{'/reserve/' + ${interviewer.intrId}}">예약하기</a>
      </div>

      <div class="profile-left">
        <img th:if="${interviewer.intrImage != null and interviewer.intrImage != ''}" th:src="@{${interviewer.intrImage}}" alt="프로필 이미지" />
        <img th:unless="${interviewer.intrImage != null and interviewer.intrImage != ''}" src="/images/default_profile.jpg" alt="기본 프로필 이미지" style="width: 200px; height: 200px; object-fit: cover; border-radius: 10px;" />
      </div>

      <div class="info-right">
        <p><strong>이름 :</strong> <span th:text="${interviewer.userName}"></span></p>
        <p><strong>직무 :</strong>
          <span th:each="cate : ${#strings.arraySplit(interviewer.intrCate, ',')}">
            <span class="job-tag" th:text="${cate}" style="display:inline-block;background:#f0f0f0;border-radius:8px;padding:2px 10px;margin-right:5px;font-size:13px;"></span>
          </span>
        </p>
        <p><strong>경력 :</strong> <span th:text="${interviewer.userCareer}"></span></p>
        <p><strong>스킬 :</strong> <span th:text="${interviewer.userSkill}"></span></p>
      </div>
    </div>

    <!-- 🔹 자기소개 -->
    <div class="intro-box">
      <strong>자기소개 :</strong>
      <p th:text="${interviewer.intrIntro}"></p>
    </div>

    <!-- 🔹 리뷰 작성 -->
    <form th:action="@{/review/submit}" method="post" class="review-form">
      <input type="hidden" name="interviewerId" th:value="${interviewer.intrId}" />
      <div class="star-rating">
        <input type="radio" id="star5" name="rating" value="5"><label for="star5">★</label>
        <input type="radio" id="star4" name="rating" value="4"><label for="star4">★</label>
        <input type="radio" id="star3" name="rating" value="3"><label for="star3">★</label>
        <input type="radio" id="star2" name="rating" value="2"><label for="star2">★</label>
        <input type="radio" id="star1" name="rating" value="1"><label for="star1">★</label>
      </div>
      <input type="text" name="content" placeholder="리뷰 내용을 입력하세요" required>
      <button type="submit">등록</button>
    </form>

    <!-- 🔹 리뷰 리스트 -->
    <div class="review-list-section">
      <div class="review-item" th:each="r : ${reviews}">
        <div class="review-header">
          <div class="review-stars">
            <span th:each="i : ${#numbers.sequence(1, T(java.lang.Math).floor(r.score))}">★</span>
            <span th:if="${r.score % 1 >= 0.5}">☆</span>
            <span th:each="i : ${#numbers.sequence(1, 5 - T(java.lang.Math).ceil(r.score))}">☆</span>
          </div>
          <span class="review-date" th:text="${#temporals.format(r.createdDt, 'yyyy-MM-dd')}"></span>
        </div>
        <div class="review-content" th:text="${r.content}"></div>
        <div class="review-footer">
          <span class="review-user" th:text="${r.userId}"></span>
          <button class="edit-btn">수정</button>
          <button class="delete-btn">삭제</button>
        </div>
      </div>
    </div>

  </div>

  <!-- Footer -->
  <div th:replace="fragments/footer :: footerFragment"></div>
</body>
</html>
