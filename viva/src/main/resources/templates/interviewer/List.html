<!-- 면접관 리스트 페이지 (interviewer.html) -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">

  <title>면접관 리스트</title> 
  <link rel="stylesheet" th:href="@{/css/common.css}">
  <link rel="stylesheet" th:href="@{/css/interviewer.css}">
   
</head>
<body>

  <!-- Header -->
  <div th:replace="fragments/header :: headerFragment"></div>

  <div class="container">
    <h1>면접관 목록</h1>

    <!-- ✅ 직무 필터 -->
    <div class="category-filter">
      <label class="filter-label">직무·직업</label>
      <div class="tag-container">
        <span class="tag"
              th:each="cate : ${T(com.example.demo.model.entity.CategoryType).values()}"
              th:text="${cate.label}"
              th:attr="data-value=${cate}"
              onclick="toggleTag(this)">
        </span>
      </div>

      <form method="get" th:action="@{/interviewer}">
        <input type="hidden" name="intrCate" id="intrCateHidden">
        <button type="submit" class="search-btn">검색</button>
      </form>
    </div>

    <hr>

    <!-- ✅ 면접관 카드 리스트 -->
    <div class="teacher-contents">
      <div class="list-wrap">
        <a class="teacher-item" th:each="i, iterStat : ${interviewers}" th:if="${iterStat.index} < 9" th:href="@{'/interviewer/' + ${i.intrId}}">
          <div class="teacher-inner">
            <img th:if="${i.intrImage != null and i.intrImage != ''}" th:src="@{${i.intrImage}}" alt="프로필 이미지" />
            <img th:unless="${i.intrImage != null and i.intrImage != ''}" src="/images/default_profile.jpg" alt="기본 프로필 이미지" />
            <div class="text-box">
              <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 4px;">
                <span class="name" th:text="${i.userName}" style="font-weight: bold; font-size: 1.2em; color: #a05a00; text-decoration: none;">이름</span>
                <span>
                  <span class="review-score" style="color: #ffb400; font-size: 1em; margin-right: 2px;">★</span>
                  <span th:text="${i.avgScore != null ? #numbers.formatDecimal(i.avgScore, 1, 1) : '0.0'}" style="font-size: 1em;"></span>
                </span>
              </div>
              <div class="desc" th:text="${i.intrIntro}" style="margin: 8px 0 4px 0; color: #333;">한줄소개</div>
              <div class="job-tags" style="margin-top: 4px;">
                <span th:each="cate, iterStat : ${#strings.arraySplit(i.intrCate, ',')}">
                  <span class="job-tag" th:text="${cate}" style="display:inline-block;background:#f0f0f0;border-radius:8px;padding:2px 10px;margin-right:5px;font-size:13px;"></span>
                </span>
              </div>
            </div>
          </div>
        </a>
      </div>
    </div>

    <!-- 페이징 UI -->
    <div class="paging">
      <button class="disabled">&lt;&lt;</button>
      <button class="disabled">&lt;</button>
      <span class="active">1</span>
      <button>2</button>
      <button>3</button>
      <button>4</button>
      <button>&gt;</button>
      <button>&gt;&gt;</button>
    </div>


    <div style="text-align: right; margin-top: 30px;" th:if="${role == 'intr'}">
      <a href="/interviewer/form">
        <button type="button" class="write-btn">➕ 프로필 카드 만들기</button>
      </a>
    </div>
  </div>

  <!-- Footer -->
  <div th:replace="fragments/footer :: footerFragment"></div>

  <script>
  function toggleTag(tagEl) {
    tagEl.classList.toggle("selected");
    const selected = Array.from(document.querySelectorAll(".tag.selected")).map(t => t.dataset.value);

    if (selected.length > 3) {
      tagEl.classList.remove("selected");
      alert("최대 3개까지만 선택할 수 있습니다.");
      return;
    }

    document.getElementById("intrCateHidden").value = selected.join(",");
  }
  </script>
</body>
</html>
