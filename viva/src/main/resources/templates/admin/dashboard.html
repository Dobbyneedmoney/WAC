<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>관리자 대시보드</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
    <link rel="stylesheet" th:href="@{/css/users.css}">
</head>
<body>
<!-- 공통 헤더 -->
<div th:replace="fragments/header :: header"></div>

<div class="admin-dashboard-container">
    <!-- 사이드바 -->
    <aside class="admin-sidebar">
        <div class="admin-title">관리자 대시보드</div>
        <nav>
            <a href="#" class="sidebar-link" data-url="/admin/dashboard-content">공지관리</a>
            <a href="#" class="sidebar-link" data-url="/admin/users">회원관리</a>
            <a href="#" class="sidebar-link" data-url="/admin/posts">게시물관리</a>
            <a href="#" class="sidebar-link" data-url="/admin/points">포인트관리</a>
            <a href="#" class="sidebar-link" data-url="/admin/interviewers">면접관 관리</a>
        </nav>
    </aside>

    <!-- 본문(main) AJAX 영역 -->
    <main class="admin-main-content">
        <div id="adminMainContent">
            <h2 style="margin-bottom:30px;">관리자 대시보드</h2>
            <div>
                <p>여기에 각종 통계, 주요 알림, 버튼 등을 넣으세요.</p>
            </div>
        </div>
    </main>
</div>

<!-- jQuery 및 AJAX 메뉴 클릭 처리 -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/js/users.js"></script>
<script>
$(".sidebar-link").click(function(e) {
    e.preventDefault();
    const url = $(this).data("url");
    if (url === "/admin/users") {
        $.ajax({
            url: url,
            type: "GET",
            data: { userRole: "mem" }, // ← 반드시!
            success: function(data) { $("#adminMainContent").html(data); },
            error: function() { $("#adminMainContent").html("<p>불러오기 오류!</p>"); }
        });
    } else {
        $.ajax({
            url: url,
            type: "GET",
            success: function(data) { $("#adminMainContent").html(data); },
            error: function() { $("#adminMainContent").html("<p>불러오기 오류!</p>"); }
        });
    }
});
</script>
</body>
</html>